{"ast":null,"code":"import { FormGroup, FormControl, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../api.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common/http\";\nimport * as i5 from \"src/app/app.tokenservice\";\nimport * as i6 from \"@angular/common\";\nfunction NewapplicationComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 1)(2, \"div\", 2)(3, \"span\", 3);\n    i0.ɵɵtext(4, \"Loading....\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction NewapplicationComponent_div_1_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r2.errorMessage);\n  }\n}\nfunction NewapplicationComponent_div_1_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \" Please enter User Name \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewapplicationComponent_div_1_span_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \" Please enter Password \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewapplicationComponent_div_1_span_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \" Please enter Official Email address \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewapplicationComponent_div_1_span_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \" Please enter Phone Number \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewapplicationComponent_div_1_span_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \" Please enter valid phone number \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewapplicationComponent_div_1_span_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \" Please enter Designation \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewapplicationComponent_div_1_option_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 30);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const company_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", company_r11.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(company_r11.companyName);\n  }\n}\nfunction NewapplicationComponent_div_1_div_56_span_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \" Please enter Driving License Number \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewapplicationComponent_div_1_div_56_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 29);\n    i0.ɵɵtext(1, \" Please enter valid Driving License Number \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction NewapplicationComponent_div_1_div_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 7)(2, \"label\", 14);\n    i0.ɵɵtext(3, \"license Number:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"input\", 31);\n    i0.ɵɵtemplate(5, NewapplicationComponent_div_1_div_56_span_5_Template, 2, 0, \"span\", 10);\n    i0.ɵɵtemplate(6, NewapplicationComponent_div_1_div_56_span_6_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 7)(8, \"label\", 14);\n    i0.ɵɵtext(9, \"Expiration Date:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 7)(12, \"label\", 33);\n    i0.ɵɵtext(13, \"Rta:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 34);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 7)(16, \"label\", 33);\n    i0.ɵɵtext(17, \"Allowed Vehicles:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 35);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ctx_r10.newapplication.get(\"licenseNo\").errors && ctx_r10.newapplication.get(\"licenseNo\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.newapplication.get(\"licenseNo\").hasError(\"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.newapplication.get(\"licenseNo\").hasError(\"invalidlicenseno\"));\n  }\n}\nfunction NewapplicationComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 4);\n    i0.ɵɵtext(2, \"New Application\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, NewapplicationComponent_div_1_div_3_Template, 2, 1, \"div\", 5);\n    i0.ɵɵelementStart(4, \"form\", 6);\n    i0.ɵɵlistener(\"ngSubmit\", function NewapplicationComponent_div_1_Template_form_ngSubmit_4_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.onSubmit());\n    });\n    i0.ɵɵelementStart(5, \"div\", 7)(6, \"label\", 8);\n    i0.ɵɵtext(7, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(8, \"input\", 9);\n    i0.ɵɵtemplate(9, NewapplicationComponent_div_1_span_9_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 7)(11, \"label\", 8);\n    i0.ɵɵtext(12, \"Password:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(13, \"input\", 11);\n    i0.ɵɵtemplate(14, NewapplicationComponent_div_1_span_14_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 7)(16, \"label\", 12);\n    i0.ɵɵtext(17, \"Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(18, \"input\", 13);\n    i0.ɵɵtemplate(19, NewapplicationComponent_div_1_span_19_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"div\", 7)(21, \"label\", 14);\n    i0.ɵɵtext(22, \"Phone:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"input\", 15);\n    i0.ɵɵtemplate(24, NewapplicationComponent_div_1_span_24_Template, 2, 0, \"span\", 10);\n    i0.ɵɵtemplate(25, NewapplicationComponent_div_1_span_25_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"div\", 7)(27, \"label\", 14);\n    i0.ɵɵtext(28, \"Designation:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(29, \"input\", 16);\n    i0.ɵɵtemplate(30, NewapplicationComponent_div_1_span_30_Template, 2, 0, \"span\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"div\", 7)(32, \"label\", 17);\n    i0.ɵɵtext(33, \"Role:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(34, \"div\")(35, \"label\");\n    i0.ɵɵelement(36, \"input\", 18);\n    i0.ɵɵtext(37, \" Motorist\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(38, \"label\");\n    i0.ɵɵelement(39, \"input\", 19);\n    i0.ɵɵtext(40, \" Rider\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(41, \"div\", 7)(42, \"label\", 14);\n    i0.ɵɵtext(43, \"Employee Id:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(44, \"input\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(45, \"div\", 7)(46, \"label\", 14);\n    i0.ɵɵtext(47, \"Aadhar Number:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(48, \"input\", 21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(49, \"div\", 7)(50, \"label\", 22);\n    i0.ɵɵtext(51, \"Company:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(52, \"select\", 23)(53, \"option\", 24);\n    i0.ɵɵtext(54, \"Select a company\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(55, NewapplicationComponent_div_1_option_55_Template, 2, 2, \"option\", 25);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(56, NewapplicationComponent_div_1_div_56_Template, 19, 4, \"div\", 0);\n    i0.ɵɵelementStart(57, \"button\", 26);\n    i0.ɵɵtext(58, \"Reset\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"button\", 27);\n    i0.ɵɵtext(60, \"Submit\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.errorMessage != \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.newapplication);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ctx_r1.newapplication.get(\"username\").errors && ctx_r1.newapplication.get(\"username\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.newapplication.get(\"username\").hasError(\"required\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ctx_r1.newapplication.get(\"password\").errors && ctx_r1.newapplication.get(\"password\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.newapplication.get(\"password\").hasError(\"required\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ctx_r1.newapplication.get(\"officialEmail\").errors && ctx_r1.newapplication.get(\"officialEmail\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.newapplication.get(\"officialEmail\").hasError(\"required\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ctx_r1.newapplication.get(\"phoneNumber\").errors && ctx_r1.newapplication.get(\"phoneNumber\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.newapplication.get(\"phoneNumber\").hasError(\"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.newapplication.get(\"phoneNumber\").hasError(\"phoneNumberInvalid\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"is-invalid\", ctx_r1.newapplication.get(\"designation\").errors && ctx_r1.newapplication.get(\"designation\").touched);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.newapplication.get(\"designation\").hasError(\"required\"));\n    i0.ɵɵadvance(25);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.companyList);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.newapplication.get(\"roleId\").value === \"1\");\n  }\n}\nexport let NewapplicationComponent = /*#__PURE__*/(() => {\n  class NewapplicationComponent {\n    constructor(formBuilder, dataService, router, http, tokenService) {\n      this.formBuilder = formBuilder;\n      this.dataService = dataService;\n      this.router = router;\n      this.http = http;\n      this.tokenService = tokenService;\n      this.companyList = [];\n      this.isLoading = false;\n      this.errorMessage = \"\";\n    }\n    validatePhoneNumber() {\n      return control => {\n        const phoneNumber = control.value;\n        if (phoneNumber && phoneNumber.length !== 10) {\n          return {\n            'phoneNumberInvalid': true\n          };\n        }\n        return null;\n      };\n    }\n    validatelicensenumber() {\n      return control => {\n        const phoneNumber = control.value;\n        const validPhoneNumber = /^[A-Za-z]{3}\\d{4}[A-Za-z]{3}$/; // regular expression for 10 digit phone number\n        return validPhoneNumber.test(phoneNumber) ? null : {\n          invalidlicenseno: true\n        };\n      };\n    }\n    ngOnInit() {\n      this.isLoading = true;\n      this.newapplication = new FormGroup({\n        username: new FormControl('', Validators.required),\n        password: new FormControl('', Validators.required),\n        officialEmail: new FormControl('', Validators.required),\n        phoneNumber: new FormControl('', [Validators.required, this.validatePhoneNumber()]),\n        designation: new FormControl('', Validators.required),\n        roleId: new FormControl('', Validators.required),\n        employeeeId: new FormControl('', Validators.required),\n        aadharNumber: new FormControl('', Validators.required),\n        applicationStatus: new FormControl('New'),\n        companyId: new FormControl('', Validators.required),\n        licenseNo: new FormControl(null, [this.validatelicensenumber()]),\n        expirationDate: new FormControl(new Date()),\n        rta: new FormControl(),\n        alowedVehicles: new FormControl()\n      });\n      // Fetch the list of companies from the API\n      this.dataService.getCompanies().subscribe(response => {\n        this.companyList = response;\n        this.isLoading = false;\n        console.log(this.tokenService.getToken());\n      });\n    }\n    // Handler for form submission\n    onSubmit() {\n      // if (this.newapplication.invalid) {\n      //   return;\n      // }\n      console.log(this.newapplication.value);\n      this.dataService.createApplication(this.newapplication.value).subscribe(response => {\n        console.log(response);\n        // show acknowledgement message here\n      }, error => {\n        console.log(error);\n        // show error message here\n      });\n    }\n  }\n\n  NewapplicationComponent.ɵfac = function NewapplicationComponent_Factory(t) {\n    return new (t || NewapplicationComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.HttpClient), i0.ɵɵdirectiveInject(i5.TokenService));\n  };\n  NewapplicationComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: NewapplicationComponent,\n    selectors: [[\"app-newapplication\"]],\n    decls: 2,\n    vars: 2,\n    consts: [[4, \"ngIf\"], [1, \"d-flex\", \"justify-content-center\", \"align-items-center\", 2, \"height\", \"100vh\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"visually-hidden\"], [1, \"text-center\", \"mb-4\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"name\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"username\", \"required\", \"\", 1, \"form-control\"], [\"class\", \"invalid-feedback\", 4, \"ngIf\"], [\"type\", \"text\", \"id\", \"name\", \"formControlName\", \"password\", \"required\", \"\", 1, \"form-control\"], [\"for\", \"email\"], [\"type\", \"email\", \"id\", \"email\", \"formControlName\", \"officialEmail\", 1, \"form-control\"], [\"for\", \"phone\"], [\"type\", \"text\", \"id\", \"phone\", \"formControlName\", \"phoneNumber\", 1, \"form-control\"], [\"type\", \"tel\", \"id\", \"designation\", \"formControlName\", \"designation\", 1, \"form-control\"], [\"for\", \"role\"], [\"type\", \"radio\", \"name\", \"role\", \"value\", \"1\", \"formControlName\", \"roleId\", \"required\", \"\"], [\"type\", \"radio\", \"name\", \"role\", \"value\", \"2\", \"formControlName\", \"roleId\", \"required\", \"\"], [\"type\", \"tel\", \"id\", \"employeeid\", \"formControlName\", \"employeeeId\", 1, \"form-control\"], [\"type\", \"text\", \"id\", \"paadharnumber\", \"formControlName\", \"aadharNumber\", 1, \"form-control\"], [\"for\", \"company\"], [\"id\", \"company\", \"formControlName\", \"companyId\", 1, \"form-control\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"reset\", 1, \"btn\", \"btn-primary\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 2, \"float\", \"right\"], [1, \"alert\", \"alert-danger\"], [1, \"invalid-feedback\"], [3, \"value\"], [\"type\", \"tel\", \"id\", \"licenseno\", \"formControlName\", \"licenseNo\", 1, \"form-control\"], [\"type\", \"date\", \"id\", \"expdate\", \"formControlName\", \"expirationDate\", 1, \"form-control\"], [\"for\", \"rta\"], [\"type\", \"text\", \"id\", \"rta\", \"formControlName\", \"rta\", 1, \"form-control\"], [\"type\", \"text\", \"id\", \"allowed\", \"formControlName\", \"alowedVehicles\", 1, \"form-control\"]],\n    template: function NewapplicationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, NewapplicationComponent_div_0_Template, 5, 0, \"div\", 0);\n        i0.ɵɵtemplate(1, NewapplicationComponent_div_1_Template, 61, 20, \"div\", 0);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isLoading);\n      }\n    },\n    dependencies: [i6.NgForOf, i6.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.RadioControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.FormGroupDirective, i1.FormControlName],\n    styles: [\"form[_ngcontent-%COMP%]{min-width:300px;max-width:400px;padding:20px;margin:0 auto;background:#70e1f5;background:linear-gradient(to right,#ffd194,#70e1f5);box-shadow:3px 3px 23px -9px #000000db}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid #eee;border-radius:0!important;padding:5px 8px;color:#444}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:20px}.pull-right[_ngcontent-%COMP%]{float:right}.cont[_ngcontent-%COMP%]{position:absolute;inset:0}\"]\n  });\n  return NewapplicationComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}